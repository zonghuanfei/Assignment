## 7.1 描述机械臂
### DH参数表各参数
各参数含义

![图片无效](https://github.com/zonghuanfei/Assignment/blob/3.26/pic/%E7%AC%AC%E4%B8%83%E7%AB%A01.png)  
从连杆坐标系行{j-1}到坐标系{j}的变换被定义为基本旋转和平移，其形式如下:  
![图片无效](https://github.com/zonghuanfei/Assignment/blob/3.26/pic/%E7%AC%AC%E4%B8%83%E7%AB%A02.png)  
工具箱建立一个机械臂：
```
>>L=Link( [0,0.1,0.2, pi/2,0])
L=
theta=q,d=0.1,a=0.2,alpha=1.571(R, stdDH)
%%R表示转动关节，stdDH表示标准DH参数表达，尽管赋给了theta一个值，但并没有显示出来
这个值在运动学参数系列中仅仅作为一个占位者。theta将被关节变量q所取代
因此它的值在Link对象中被忽略掉了。这个值将由Link对象进行管理。

```
1=0.5时，此机械臂用上面的矩阵表示为：  
```
>> L.A(0.5)
 

ans = 
    0.8776         0    0.4794    0.1755
    0.4794         0   -0.8776   0.09589
         0         1         0       0.1
         0         0         0         1
>> 
L.RP=
ans=
R
%%R表示这个机械臂是转动的
L.a
ans =

    0.2000
    返回值为运动参数a

```
最后，一个连杆还可以包含一个偏移值
```
>>  L.offset=0.5
 
L = 
Revolute(std): theta=q, d=0.1, a=0.2, alpha=1.5708, offset=0.5
>> L.A(0)
 

ans = 
    0.8776         0    0.4794    0.1755
    0.4794         0   -0.8776   0.09589
         0         1         0       0.1
         0         0         0         1
>> 

```
### 正运动学
## 两连轴机器人
建立两连轴机器人
```
>> L(2) =Link([0 0 1 0]);
>> L(1) =Link([0 0 1 0]);
>> L
 
L = 
Revolute(std):  theta=q1   d=0           a=1           alpha=0           offset=0          
Revolute(std):  theta=q2   d=0           a=1           alpha=0           offset=0          
>> 
>> two_link = SerialLink (L, ' name ' , 'two link ' );
two_link
 
two_link = 
 
two link:: 2 axis, RR, stdDH, slowRNE                            
+---+-----------+-----------+-----------+-----------+-----------+
| j |     theta |         d |         a |     alpha |    offset |
+---+-----------+-----------+-----------+-----------+-----------+
|  1|         q1|          0|          1|          0|          0|
|  2|         q2|          0|          1|          0|          0|
+---+-----------+-----------+-----------+-----------+-----------+
two_link.n
ans=
2
%%此命令为返回关节数目
%%q1=q2=0时
two_link.fkine([0 0])
ans = 
         1         0         0         2
         0         1         0         0
         0         0         1         0
         0         0         0         1
%%用以下指令可以画出机器人的图形:
>>twolink.plot([0 0])

>>twolink.plot([pi/4 -pi/4])

```
### 7.2.2六轴机器人
```
>> mdl_puma560
%此函数将建立一个名为p560的SerialLink对象  
p560  
 
Puma 560 [Unimation]:: 6 axis, RRRRRR, stdDH, slowRNE            
 - viscous friction; params of 8/95;                             
+---+-----------+-----------+-----------+-----------+-----------+
| j |     theta |         d |         a |     alpha |    offset |
+---+-----------+-----------+-----------+-----------+-----------+
|  1|         q1|          0|          0|     1.5708|          0|
|  2|         q2|          0|     0.4318|          0|          0|
|  3|         q3|    0.15005|     0.0203|    -1.5708|          0|
|  4|         q4|     0.4318|          0|     1.5708|          0|
|  5|         q5|          0|          0|    -1.5708|          0|
|  6|         q6|          0|          0|          0|          0|
+---+-----------+-----------+-----------+-----------+-----------+
 

```
![图片无效](https://github.com/zonghuanfei/Assignment/blob/3.26/pic/%E7%AC%AC%E4%B8%83%E7%AB%A0%E5%9B%9B.png)  
### 7.3逆运动学
## 7.3.1 封闭形式解
对于一个六轴机器人,其逆运动学具有封闭形式解的一个必要条件是:三个腕关节的轴相交于一个点。这意味着腕关节的运动只改变末端执行器的姿态，而不改变其位置。这种机构被称为球腕,而且几乎所有的工业机器人都具有这样的腕关节。  
我们将继续使用Puma机器人模型来探讨逆运动学问题。  
```
T=p560.fkine(qn)
 

T = 
         0         0         1    0.5963
         0         1         0   -0.1501
        -1         0         0  -0.01435
         0         0         0         1

%%Puma 560是一种包含一个球腕的六轴机器人，因此我们使用ikine6s方法来计算其逆运动学的封闭解T。要实现位姿T，所需的关节坐标为
>>qi =p560.ikine6s(T)
qi =
2.6486  -3.9270  0.0940  2.5326  0.9743  0.3734
>> p560.fkine(qi)
 

ans = 
         0         0         1    0.5963
         0         1         0     -0.15
        -1         0         0  -0.01435
         0         0         0         1
```


我们发现，两组不同的关节坐标值得到了相同的末端执行器位姿,而这两组坐标值对应的机器人位形如图7.6所示。该Puma机器人的肩关节相对于腰部有个水平偏移，所以一组坐标解对应的机械臂在腰部的左侧，而另一组则对应在右侧,它们分别被称为左手运动学位形和右手运动学位形。一般来说，有8组不同的关节坐标值可以得到相同的末端执行器位姿——正如前面所提到的,逆解不是唯一的。
## 7.3.2 数值解
对于不具有6个关节和球形腕关节的机器人，我们需要使用一种迭代数值解。继续使用上一节的示例,我们使用ikine方法来计算一般逆运动学解:它们与最初的关节数值不同，但它们仍能得到正确的工具位姿，正如所预料的那样，通用数值方法ikine要比解析方法ikine6s 慢很多。然而，它也具有很大的优势，它能够求解处于奇异位形以及非6关节型的机械臂。有关工kine方法的详细原理见8.4节。  
## 7.3.4冗余机械臂  
冗余机械臂是指具有多于6个关节的机器人。"正如前面提到的,6个关节在理论上就足以达到任何笛卡儿任务空间厂 ∈ SE(3)中所期望的位姿。  
然而，由于关节限制和奇异位形等实际问题的存在，并非所有机器人可达空间内的位姿都可以实现。增加额外的关节是克服这个问题的一种方法。
![图片无效](https://github.com/zonghuanfei/Assignment/blob/3.26/pic/%E7%AC%AC%E4%B8%83%E7%AB%A0%E4%BA%94.png)  
```
>>p560 . maniplty ( cm)ans=
0.0786
%%而八轴机器人的可操作性为
>>p8 . maniplty([o o qn])ans=
1.1151
%%它远大于六轴机器人,说明八轴机器人的灵巧性增加了。
```
## 7.4轨迹
我们考虑末端执行器在两个笛卡儿位姿之间移动R:
```
>>T1=transl(0.4,0.2,0)*trotx(pi);
>>T2=trans1(0.4,-0.2,0)*trotx(pi/2);
q1=p560.ikine6s(T1);
q2=p560.ikine6s(T2);
>>q= mtraj(@tpoly,q1,q2,t);
>>q= mtraj(@lspb,q1,q2,t);
而我们要求整个运动发生在2秒时间内，采样时间间隔为50微秒。
>>t=[0:0.05:2]';
>>q=jtraj(a1, a2, t);
```
我们可以通过可选的输出参数,获得随时间变化的关节速度和加速度向量:
```

>[q,qd,qdd] = jtraj(q1, q2, t);

```
SerialLink 类中的jtraj方法为上述步骤提供了一个更简洁的表达方式:
``
>> q = p560.jtraj(T1，T2,t)
``
### 7.4.2笛卡尔运动
```
```
>Ts = ctraj(T1，T2,length(t));
其输入参数是初始和最后的位姿，以及时间步数，它返回的是一个三维矩阵形式的轨迹。
对于前面的关节空间运动的例子，我们将提取并绘制其位置分量:
>>plot(t, transl(Ts)) ;
以及姿态分量:
>> plot(t, tr2rpy(Ts)) ;
```
>>T= transl(0.4, 0.2,0）* trotx(pi) ;
然后分别确定右手-肘在上位形和左手-肘在上位形对应的关节坐标:
>>qr=p560.ikine6s(T,'ru') ;
>>ql=p560.ikine6s(T,'lu');
最后创建这两个关节坐标之间的一个路径:
>> a =jtraj(qr, ql, t);
```
## 7.5高级问题

## 7.6绘图
